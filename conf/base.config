manifest {
    name = 'NKI-Atlas-Microbiome'
    description = 'Nextflow pipeline for creating the NKI-Atlas of microbes - R.H. convereted this pipeline to DSL2 to run on a single VM with 32 cores'
    mainScript = 'main.nf'
    version = '0.6.1'
    //author = "Thomas W. Battaglia"
    author = "${System.getenv('USER') ?: 'unknown'}"
    // notes = "R.H. convereted this pipeline to DSL2 to run on a single VM with 32 cores " attribute not allowed
}

// Set default parameters
params {
  help = false
  // csv = '/home/rayanhassaine/microbe_data_test/samplesheet_microbiome_test.csv'
  blood = false
  csv = '/home/rhassaine/tumor-microbiome-nf/samplesheet_CPCT_test.csv'
  outdir = '/home/rhassaine/tumor-microbiome-nf/microbe_test_results'
  publish_dir_mode = 'copy'
  min_length = 50
  min_quality = 20
  krakenDB = '/home/rhassaine/tumor-microbiome-nf/microbe_resources/kraken2_humgut'
  kraken_len = 150
  confidence = 0
  min_counts = 10
  skip_kraken2 = false
  pathseqDB = '/home/rhassaine/tumor-microbiome-nf/microbe_resources/pathseq_humgut'
  phred_cutoff = 15
  microbe_cutoff = 30
  normalize_abundance = false
  identity_margin = 0.02
  min_score_identity = 0.9
  host_aligned = false
  min_clip_length = 60
  skip_pre_bwa = false
  print = true
  skip_pathseq = false
  tracedir = "${params.outdir}/pipeline_info"
  //sample = should this be attempted ? not sure about added value
}

// Docker parameters
docker {
    enabled = true
    //runOptions = '-u $(id -u):$(id -g)'
}

// Reduce polling interval
executor {
    name = 'local'
    //name = 'google-lifesciences'
    // queueSize = 50
    // pollInterval = '100ms'
    // exitReadTimeout = '300 ms'
}

// Capture Nextflow reports into separate directory
timeline {
  enabled = true
  overwrite = true
  file = "${params.tracedir}/timeline.html"
}
report {
  enabled = true
  overwrite = true
  file = "${params.tracedir}/report.html"
}
trace {
  enabled = true
  overwrite = true
  file = "${params.tracedir}/trace.txt"
}